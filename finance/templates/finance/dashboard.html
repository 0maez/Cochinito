{% extends "finance/base.html" %}

{% block content %}
<div class="container">
    <h2>Dashboard</h2>



    <!-- Mostrar el presupuesto total -->
    <h3>Presupuesto Total</h3>
    <p>{{ user_budget.total_amount|floatformat:2 }}</p>

    <!-- Mostrar el saldo actual -->
    <h3>Saldo Actual</h3>
    <p>{{ user_budget.current_balance|floatformat:2 }}</p>

    <!-- Mostrar los recordatorios como checklist -->
    <h3>Recordatorios</h3>
    <form method="POST" action="{% url 'mark_reminder_paid' %}">
        {% csrf_token %}
        <ul>
            {% for reminder in reminders %}
                <li>
                    <label>
                        <input type="checkbox" name="reminders" value="{{ reminder.id }}" {% if reminder.is_paid %}checked{% endif %}>
                        {{ reminder.name }} - {{ reminder.date }}: {{ reminder.amount|floatformat:2 }}
                    </label>
                </li>
            {% endfor %}
        </ul>
        <button type="submit" class="btn btn-success">Actualizar Recordatorios</button>
    </form>
    <!-- Bot칩n para ver la lista completa de recordatorios -->
<a href="{% url 'reminder_list' %}" class="btn btn-info" style="margin-bottom: 20px;">Ver todos los Recordatorios</a>
    <!-- Bot칩n para crear recordatorio -->
<a href="{% url 'create_reminder' %}" class="btn btn-primary" style="margin-bottom: 20px;">Crear Recordatorio</a>


    <!-- Mostrar los ingresos -->
    <h3>Ingresos</h3>
    <ul>
        {% for source in income_sources %}
            <li>{{ source.name }}: {{ source.amount|floatformat:2 }}</li>
        {% endfor %}
    </ul>

    <!-- Mostrar los gastos b치sicos (50%) -->
    <h3>Gastos B치sicos (50%)</h3>
    <p>Disponible: {{ available_for_basic_expenses|floatformat:2 }}</p>
    <ul>
        {% for expense in basic_expenses %}
            <li>{{ expense.name }}: {{ expense.amount|floatformat:2 }}</li>
        {% endfor %}
    </ul>

    <!-- Mostrar los deseos (30%) -->
    <h3>Deseos (30%)</h3>
    <p>Disponible: {{ available_for_wish_expenses|floatformat:2 }}</p>
    <ul>
        {% for wish in wish_expenses %}
            <li>{{ wish.name }}: {{ wish.amount|floatformat:2 }}</li>
        {% endfor %}
    </ul>

    <!-- Mostrar los ahorros e inversiones (20%) -->
    <h3>Ahorros e Inversiones (20%)</h3>
    <p>Disponible: {{ available_for_savings|floatformat:2 }}</p>
    <ul>
        {% for saving in savings_investments %}
            <li>{{ saving.name }}: {{ saving.amount|floatformat:2 }}</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
