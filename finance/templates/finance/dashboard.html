{% extends "finance/base.html" %}

{% block content %}
<div class="container">
    <h2>Dashboard</h2>


    <h3>Presupuesto Total</h3>
    <p>{{ user_budget.total_amount|floatformat:2 }}</p>  


    <h3>Saldo Actual</h3>
    <p>{{ user_budget.current_balance|floatformat:2 }}</p>  

    <h3>Recordatorios</h3>
    <form method="POST" action="{% url 'mark_reminder_paid' %}">
        {% csrf_token %}
        <ul>
            {% for reminder in reminders %}
                <li>
                    <label>
                        <input type="checkbox" name="reminders" value="{{ reminder.id }}" {% if reminder.is_paid %}checked{% endif %}>
                        {{ reminder.name }} - {{ reminder.date }}: {{ reminder.amount|floatformat:2 }}
                    </label>
                </li>
            {% endfor %}
        </ul>
        <button type="submit" class="btn btn-success">Actualizar Recordatorios</button>
    </form>
<a href="{% url 'reminder_list' %}" class="btn btn-info" style="margin-bottom: 20px;">Ver todos los Recordatorios</a>
<a href="{% url 'create_reminder' %}" class="btn btn-primary" style="margin-bottom: 20px;">Crear Recordatorio</a>

    <h3>Ingresos</h3>
    <ul>
        {% for source in income_sources %}
            <li>{{ source.name }}</li>  
        {% endfor %}
    </ul>


    <h3>Gastos BÃ¡sicos (50%)</h3>
    <p>Disponible: {{ available_for_basic_expenses|floatformat:2 }}</p>  
    <ul>
        {% for expense in basic_expenses %}
            <li>{{ expense.name }}</li>  
        {% endfor %}
    </ul>


    <h3>Deseos (30%)</h3>
    <p>Disponible: {{ available_for_wish_expenses|floatformat:2 }}</p>  
    <ul>
        {% for wish in wish_expenses %}
            <li>{{ wish.name }}</li>  
        {% endfor %}
    </ul>

    
    <h3>Ahorros e Inversiones (20%)</h3>
    <p>Disponible: {{ available_for_savings|floatformat:2 }}</p>  
    <ul>
        {% for saving in savings_investments %}
            <li>{{ saving.name }}</li>  
        {% endfor %}
    </ul>
</div>

<a href="{% url 'add_income' %}">Agregar Ingreso</a>
<a href="{% url 'add_expense' %}">Agregar Gasto</a>
<a class="nav-link" href="{% url 'transaction_list' %}">Historial de Transacciones</a>

{% endblock %}

